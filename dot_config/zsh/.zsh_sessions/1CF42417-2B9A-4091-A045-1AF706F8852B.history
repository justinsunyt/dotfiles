which node
defaults write com.apple.dock autohide-time-modifier -float 0.15; killall Dock
zs
clear
ngrok http 300
brew install ngrok
ngrok http 3000
ngrok config add-authtoken 2RHzdJGXwL1Pu5RjWFs2hCTSLxF_2V38njfdzcpq8zpWea3g9
ngrok http 3000
git config
git config --global user.name "Justin Sun"
git config --global user.email justinsunyt@gmail.com
git config
git config --global
git config --list
git config help
git config --help
git config --global unset user.name
git config unset user.name
git config unset user.email
gh auth
gh auth setup-git
git
cdd scout
cdd scout
cdd
cd ~/dotfiles/dot_config/zsh
vim .zshrc
zs
brew install zsh-completions
vim .zshrc
zs
zs
chmod go-w '$HOMEBREW_PREFIX/share'
echo HOMEBREW_PREFIX
echo $HOMEBREW_PREFIX
chmod -R go-w "$HOMEBREW_PREFIX/share/zsh"
zs
chmod go-w "$HOMEBREW_PREFIX/share"
zs
vim .zshrc
zs
cdd
cdd scout
cdd
zs
vim .zshrc
cd ~/dotfiles/dot_config/zsh
vim .zshrc
zs
vim .zshrc
zs
\:wq
cat .zshrc
vim .zshrc
zs
vim .zshrc
zs
vim .zshrc
zs
vim .zshrc
zs
vim .zshrc
zs
cdd scout
cd -
vim .zshrc
zs
cdd sc
compaudit
rm -f ~/.zcompdump; compinit
zs
vim .zshrc
zs
cdd scout
git pull
git checkout develop && git pull
git merge origin/main
gpp
git checkout main
git pull
git push
git checkout develop && git pull
git merge origin/main
git push
source /Applications/Cursor.app/Contents/Resources/app/out/vs/workbench/contrib/terminal/common/scripts/shellIntegration-rc.zsh
cdd scout
p i
p add @vercel/analytics
git pull --rebae
git pull --rebase
gpp
git stash
git pull
git stash pop
git checkout -b justin/landing-page
git pull
git config
git config --global push.autoSetupRemote true
git push
git pull
git fetch origin
git rebase origin/justin/landing-page 
git reset --hard
git checkout justin/landing-page
git checkout develop && git pull
claude
npm install -g @anthropic-ai/claude-code
claude
clear
claude
clear
claude
clear
claude
clear
ani-cli
brew install curl grep aria2 ffmpeg git fzf yt-dlp && \\
brew install --cask iina
brew install curl grep aria2 ffmpeg git fzf yt-dlp && \\
brew install --cask iina
cdd scout
p dev
p trigger:dev
clear
p trigger:dev
crush
npm install -g @sourcegraph/amp
amp
amp
p trigger:dev
p trigger;dev
p trigger:dev
cdd scout
git checkout main
git pull
clear
cdd
git clone https://github.com/scrapybara/vibe-coding-interview
cd vibe-coding-interview
git fetch
git branch
git fetch
git checkout
git checkout capy/draft-combined-readm-742004ca
cursor .
vercel env pull
pnpm i -g vercel
npm i -g vercel
vercel env pull
cursor .
vercel env pull
vercel link
vercel env pull
npm i -g @charmland/crush
charm
crush
/clear
/clear
clear
cdd
git clone https://github.com/justinsunyt/opencode.git
cdd opencode
claude
/clear
clear
crush
clear
cdd scout
git checkout capy/add-xai-grok-4-fast--5bb44dfc
git fetch
git checkout f1shy/new-capy-code-ui 
cdd
git clone https://github.com/scrapybara/optspace
cdd optspace
cursor .
git checkout develop && git pull
cdd scout
git checkout develop && git pull
bash -c "$(curl -sLo- https://superfile.dev/install.sh)"
spf
neofetch
sudo apt install neofetch
brew install neofetch
neofetch
/clear
clear
neofetch
clear
p dev
p i
p dev
playwright install
pnpm playwright install
p dev
brew install btop
btop
claude
clear
p trigger:dev
clear
crush
clear
claude
claude
clear
cladue
clear
claude
p dev:web
clear
p dev:web
p i
p i
pi
p i
clear
p i
p i
p dev:web
p dev:web
p dev:web
clear
clear
p dev:web
cdd scout
git checkout main && git pull
p i
git pull
git checkout develop && git pull
git checkout -b justin/vscode
cd backend
cd packages/backend
p build
git push
git checkout capy/replace-jam-files-fi-c079a5b0
git pul
git fetch
git checkout capy/replace-jam-files-fi-c079a5b0
git checkout capy/restore-dedicated-ja-80d46a74
git fetch
git checkout capy/restore-dedicated-ja-80d46a74
git pull
gp
gp
git pull
gp
gp
git checkout develop && git pull
git fetch
git checkout capy/remove-unused-stripe-c2a039cd
p i
p check
pnpm check
p check
p turbo check
git pull
p i
gp --rebase
p i
p check
p turbo check
git checkout develop && git pull
cd ..
cd ..
git pull
git fetch
git checkout capy/add-reasoning-mode-c-da61b0a5
git fetch
git checkout capy/fix-optimistic-messa-6e2ef28c
git checkout develop && git pull
git fethc
git fetc
git fetch
clear
git checkout capy/add-claude-haiku-45--673ae00e
git checkout develop && git pull
p dev
clear
p dev
p i
clear
p dev
clear
p dev
clear
p dev
p dev
p dev
c;ear
c;ear
clear
p dev
cdd scout
git pull
git merge origin/main
git psuh
git push
git pull
clear
pnpm clean
pnpm install
CENTRAL_LICENSE_KEY="C90B8468-18CB-4F22-A7C6-2369651BCD4D" pnpm install
git checkout capy/add-fastsmart-toggle-b04e6c1f
git fetch
git checkout capy/add-fastsmart-toggle-b04e6c1f
git pull
git pull
gp
git checkout capy/hardcode-claude-sonn-ca128de1
git fetch
git checkout capy/hardcode-claude-sonn-ca128de1
git checkout develop && git pull
git fetch
git checkout capy/lock-triage-agent-to-10b48e3d 
git checkout develop && git pull
p i
git fetch
git checkout capy/remove-selectedrepos-d32445be
git checkout develop && git pull
git checkout add-overview-myYBA
git fetch
git checkout capy/cap-313-364a1dd1
git checkout develop && git pull
git stash
git checkout develop && git pull
p dev
clear
p dev
p eev
clear
p dev
clear
p dev:web
clear
p dev:web
p dev:web
clear
clear
p dev:web
clear
p dev:web
p dev
p dev:web
clear
p i
clear
p dev
p i
p i @ai-sdk/anthropic
p dev
p dev
claude
cdd scout
claude
claude
pnpm dev
pnpm i
p dev
pnpm dev
p dev
p i
p i @ai-sdk/anthropic
p dev
p dev
clear
p dev:web
p dev
p dev:web
p i
cd packages/web
p i
cd ..
p dev:web
p dev
clear
p dev:Web
clear
p dev:web
p build
p build
cd web
p build
clear
p dev
clear
p build
p build
p build
p build
p build
p build
p build
p build
p build
clear
p dev
clear
p build
dotenv -e ../../.env p build
cd ..
cd ..
clear
p dev:web
clear
cd packages/web
p build
cd ..
cd ..
p dev:web
clear
p dev:web
p dev
p dev:wegb
p dev:web
cclear
clear
p clean
clear
p i
p dev:web
clear
p dev
p dev:web
clear
p dev
clear
p dev;web
clear
p dev:web
clear
p clear
p dev:web
clear
p dev:web
git fetch
git checkout andrew/feature/captain 
git pull
git checkout develop && git pull
git status
git checkout -b justin/manual-pr
p i
pnpm clean
p i
git checkout develop && git pull
git stash
git pull
clear
p clean
cd ..
cd scout
p i
git checkout andrew/feature/captain 
git pull
p i
gp
git checkout develop
git checkout -b justin/better-prs
p db:push
cd packages/backend
p db:push
git fetch
pnpm dev:web
p i
p dev
clear
p dev:web
/clear
clear
p dev:web
clear
p dev:web
clear
p dev
p dev:web
p dev:web
p dev
p dev
p dev
p dev
p dev
p dev:web
clear
p edv
p dev
clear
p dev
clear
p dev
clear
p dev
clear
p dev
clear
p dev
clear
p dev
clear
p dev
clear
p dev
clear
p dev
claude
curl -fsSL https://claude.ai/install.sh | bash
curl -fsSL https://claude.ai/install.sh | bash
claude
curl -fsSL https://claude.ai/install.sh | bash
curl -fsSL https://claude.ai/install.sh
clear
npm i -g @anthropic-ai/claude-code
claude
cd ..
bun create hono@latest workflow-speed-test -- --template=nodejs
curl -fsSL https://bun.sh/install | bash
bun
exec /bin/zsh
bun --help
bun
cd ..
bun
bun
clear
p i
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
bun dev
bun dev
bun dev
clear
npm run dev
npm run dev
npm run dev
vercel deploy
vercel login
vercel deploy
npx workflow web --env vercel
npx workflow inspect runs --backend vercel
cd ..
cd ..
p dev:web
p dev:web
clear
p dev:web
p dev
p dev:web
clear
p dev:web
clear
p dev:web
ccelar
clear
p dev:web
p i
p dev:web
clear
p dev:web
p dev:web
cclear
clear
p clean
p i
p dev:web
p dev:web
cd packages/web
p build
p build
cd ..
cd ..
p dev:web
clear
p dev:web
ceclear
clear
p dev:web
clear
pnpm turbo deploy --filter=@capy/backend
git fetch
p i
cd packages/backend && p i
git checkout develop && git pull
git checkout develop && git pull
git pull --rebase
git push
git fetch
git checkout import { and, eq } from "drizzle-orm";\
\
import { ADMIN_IDS } from "../config/admins";\
import { db } from "../db";\
import { listProjectGithubReposInternal } from "../db/queries/project";\
import { orgUser, project, projectGithubRepository } from "../db/schema";\
import { getOctokit } from "../lib/github";\
import { getUserToServerTokenString } from "../lib/github-app";\
\
export type Permission =\
  | "admin"\
  | "maintain"\
  | "write"\
  | "triage"\
  | "read"\
  | null;\
\
interface GitHubPermissions {\
  admin?: boolean;\
  maintain?: boolean;\
  push?: boolean;\
  triage?: boolean;\
  pull?: boolean;\
}\
\
interface GitHubInstallation {\
  id: number;\
  account?: {\
    login?: string;\
  };\
}\
\
interface GitHubRepository {\
  full_name?: string;\
  permissions?: GitHubPermissions;\
}\
\
function mapPermissions(p: GitHubPermissions | undefined): Permission {\
  if (!p) return null;\
  if (p.admin) return "admin";\
  if (p.maintain) return "maintain";\
  if (p.push) return "write";\
  if (p.triage) return "triage";\
  if (p.pull) return "read";\
  return null;\
}\
\
export async function doesUserHaveGithubRepoAccess(\
  userId: string,\
  repoFullName: string,\
): Promise<{ hasAccess: boolean; permission: Permission }> {\
  if (ADMIN_IDS.includes(userId)) {\
    return { hasAccess: true, permission: "admin" as Permission };\
  }\
\
  const token = await getUserToServerTokenString(userId);\
  if (!token) {\
    return { hasAccess: false, permission: null as Permission };\
  }\
  const octokit = await getOctokit(token);\
\
  // Enumerate user installations, then scan repos per installation until we find a match\
  try {\
    const installs = await octokit.request("GET /user/installations", {\
      per_page: 100,\
      page: 1,\
      headers: { "X-GitHub-Api-Version": "2022-11-28" },\
    });\
    const installationIds: number[] = (\
      (installs.data.installations as GitHubInstallation[]) || []\
    ).map((i) => Number(i.id));\
\
    let foundPermission: Permission = null;\
    outer: for (const installationId of installationIds) {\
      let page = 1;\
      while (true) {\
        const res = await octokit.request(\
          "GET /user/installations/{installation_id}/repositories",\
          {\
            installation_id: installationId,\
            per_page: 100,\
            page,\
            headers: { "X-GitHub-Api-Version": "2022-11-28" },\
          },\
        );\
        const repos: GitHubRepository[] =\
          (res.data?.repositories as GitHubRepository[]) || [];\
        if (repos.length === 0) break;\
        for (const r of repos) {\
          if (\
            String(r.full_name || "").toLowerCase() ===\
            repoFullName.toLowerCase()\
          ) {\
            foundPermission = mapPermissions(r.permissions);\
            break outer;\
          }\
        }\
        if (repos.length < 100) break;\
        page++;\
      }\
    }\
\
    return { hasAccess: !!foundPermission, permission: foundPermission };\
  } catch {\
    return { hasAccess: false, permission: null as Permission };\
  }\
}\
\
async function getOrgAttachedOwnersAndTargets(\
  orgId: string,\
): Promise<{ owners: Set<string>; targets: Set<string> }> {\
  const rows = await db\
    .select({ repoFullName: projectGithubRepository.repoFullName })\
    .from(projectGithubRepository)\
    .innerJoin(project, eq(project.id, projectGithubRepository.projectId))\
    .where(and(eq(project.orgId, orgId), eq(project.deleted, false)))\
    .groupBy(projectGithubRepository.repoFullName);\
  const targets = new Set<string>();\
  const owners = new Set<string>();\
  for (const r of rows) {\
    if (!r.repoFullName) continue;\
    targets.add(r.repoFullName);\
    const [owner] = r.repoFullName.split("/");\
    if (owner) owners.add(owner);\
  }\
  return { owners, targets };\
}\
\
export async function getAccessibleReposForUser(\
  userId: string,\
  orgId: string,\
): Promise<{ set: Set<string>; map: Map<string, Permission> }> {\
  if (ADMIN_IDS.includes(userId)) {\
    const { targets } = await getOrgAttachedOwnersAndTargets(orgId);\
    const map = new Map<string, Permission>();\
    for (const target of targets) {\
      map.set(target, "admin");\
    }\
    return { set: targets, map };\
  }\
\
  const token = await getUserToServerTokenString(userId);\
  if (!token) {\
    return {\
      set: new Set<string>(),\
      map: new Map<string, Permission>(),\
    };\
  }\
  const octokit = await getOctokit(token);\
\
  const { owners, targets } = await getOrgAttachedOwnersAndTargets(orgId);\
  // Fetch installations once\
  const installs = await octokit.request("GET /user/installations", {\
    per_page: 100,\
    page: 1,\
    headers: { "X-GitHub-Api-Version": "2022-11-28" },\
  });\
  const installations =\
    (installs.data.installations as GitHubInstallation[]) || [];\
  const installationIds: number[] = installations\
    .filter(\
      (i) => owners.size === 0 || owners.has(String(i.account?.login || "")),\
    )\
    .map((i) => Number(i.id));\
\
  const set = new Set<string>();\
  const map = new Map<string, Permission>();\
  let matched = 0;\
\
  // If no owners matched (e.g. repos transferred/renamed), fall back to scanning all installations\
  const toScan =\
    installationIds.length > 0\
      ? installationIds\
      : installations.map((i) => Number(i.id));\
\
  outer: for (const installationId of toScan) {\
    let page = 1;\
    while (true) {\
      const res = await octokit.request(\
        "GET /user/installations/{installation_id}/repositories",\
        {\
          installation_id: installationId,\
          per_page: 100,\
          page,\
          headers: { "X-GitHub-Api-Version": "2022-11-28" },\
        },\
      );\
      const repos: GitHubRepository[] =\
        (res.data?.repositories as GitHubRepository[]) || [];\
      if (repos.length === 0) break;\
      for (const r of repos) {\
        const full = String(r.full_name || "");\
        if (targets.has(full)) {\
          set.add(full);\
          const perm = mapPermissions(r.permissions);\
          map.set(full, perm);\
          matched++;\
          if (matched >= targets.size && targets.size > 0) break outer; // early stop once we covered all targets\
        }\
      }\
      if (repos.length < 100) break;\
      page++;\
    }\
  }\
\
  return { set, map };\
}\
\
export async function isOrgAdmin(\
  userId: string,\
  orgId: string,\
): Promise<boolean> {\
  const row = await db\
    .select({ accessLevel: orgUser.accessLevel })\
    .from(orgUser)\
    .where(and(eq(orgUser.userId, userId), eq(orgUser.orgId, orgId)))\
    .limit(1)\
    .then((rows) => rows[0]);\
  const accessLevel = row?.accessLevel || "member";\
  return accessLevel === "admin" || accessLevel === "owner";\
}\
\
export async function isOrgMember(\
  userId: string,\
  orgId: string,\
): Promise<boolean> {\
  const row = await db\
    .select({ id: orgUser.id })\
    .from(orgUser)\
    .where(and(eq(orgUser.userId, userId), eq(orgUser.orgId, orgId)))\
    .limit(1)\
    .then((rows) => rows[0]);\
  return !!row;\
}\
\
export async function checkOrgMembership(\
  userId: string,\
  orgId: string,\
): Promise<{ isMember: boolean; isAdmin: boolean; isOwner: boolean }> {\
  const row = await db\
    .select({ accessLevel: orgUser.accessLevel })\
    .from(orgUser)\
    .where(and(eq(orgUser.userId, userId), eq(orgUser.orgId, orgId)))\
    .limit(1)\
    .then((rows) => rows[0]);\
\
  if (!row) {\
    return { isMember: false, isAdmin: false, isOwner: false };\
  }\
\
  const level = row.accessLevel as "owner" | "admin" | "member";\
  return {\
    isMember: true,\
    isAdmin: level === "admin" || level === "owner",\
    isOwner: level === "owner",\
  };\
}\
\
export async function canUserAccessProject(\
  userId: string,\
  projectId: string,\
  orgId: string,\
): Promise<{\
  allowed: boolean;\
  repoFullName: string | null;\
  permission: Permission;\
  orgIsAdmin: boolean;\
}> {\
  const repos = await listProjectGithubReposInternal(projectId);\
  const orgIsAdmin = await isOrgAdmin(userId, orgId);\
  if (repos && repos.length > 0) {\
    const first = repos[0]!;\
    // Prefer aggregated set to avoid per-repo scans\
    const agg = await getAccessibleReposForUser(userId, orgId);\
    if (agg.set.has(first.repoFullName)) {\
      const perm = agg.map.get(first.repoFullName) || null;\
      return {\
        allowed: true,\
        repoFullName: first.repoFullName,\
        permission: perm,\
        orgIsAdmin,\
      };\
    }\
    // Fallback: direct single-repo scan\
    const res = await doesUserHaveGithubRepoAccess(userId, first.repoFullName);\
    return {\
      allowed: res.hasAccess,\
      repoFullName: first.repoFullName,\
      permission: res.permission,\
      orgIsAdmin,\
    };\
  }\
  // Repo-less project: fallback to org membership\
  const allowed = await isOrgMember(userId, orgId);\
  return {\
    allowed,\
    repoFullName: null,\
    permission: orgIsAdmin ? "admin" : null,\
    orgIsAdmin,\
  };\
}\

git checkout capy/add-utm-tracking-wit-8920cfe7
git checkout develop && git pull
pnpm check
pnpm check
cd ..
cd ..
pnpm check
git fetch
git checkout capy/fix-vercel-build-by--3450e059
pnpm i
git push
git status
git add -A
git commit -m "fix pnpm lock"
git push
git pull
git pull --rebase
p i
git status
git add -A
git diff
git diffs
git diff
git status
git commit -m "fix lock"
git push
git checkout capy/add-utm-tracking-wit-8920cfe7
git pull
git merge origin/develop
git status
git push
git checkout capy/remove-followups-too-ea80bad9
git merge origin/develop
git push
git checkout develop
git pull
git checkout -b justin/add-admin-ids
git fetch
git checkout capy/refactor-agent-commu-5ad8b0b7
git checkout capy/implement-vm-less-ex-ae5ca7bf
git checkout capy/refactor-agent-commu-5ad8b0b7
git checkout vrishank/fix-contenteditable-paste-layout
git stashs
git stash
git checkout vrishank/fix-contenteditable-paste-layout
git stash
git checkout vrishank/fix-contenteditable-paste-layout
git pull
gh auth login
git fetch
git checkout capy/add-project-level-gi-212970e5
git pull
git pull --rebase
git push
git fetch
git checkout capy/fix-extra-spacing-on-dd3177f8
git fetch
git checkout capy/fix-diffs-panel-by-f-3c0c2125
git checkout develop
git pull
git pull
git fetch
git checkout capy/implement-grouped-to-2e218ca4
p add -D @tailwindcss/typography
pnpm remove @tailwindcss/typography
cd packages/web
p add -D @tailwindcss/typography
git pull
git pull
ping -c 4 https://8000-95a3499f-7368-4a1a-916c-05df9249e188.proxy.daytona.works/list-files
ping -c 4 8000-95a3499f-7368-4a1a-916c-05df9249e188.proxy.daytona.works\

curl -o /dev/null -s -w "DNS: %{time_namelookup}\nTCP: %{time_connect}\nTLS: %{time_appconnect}\nTTFB: %{time_starttransfer}\nTotal: %{time_total}\n" \\
  https://8000-95a3499f-7368-4a1a-916c-05df9249e188.proxy.daytona.works/list-files\

curl -o /dev/null -s -w "DNS: %{time_namelookup}\nTCP: %{time_connect}\nTLS: %{time_appconnect}\nTTFB: %{time_starttransfer}\nTotal: %{time_total}\n" \\
  https://8000-95a3499f-7368-4a1a-916c-05df9249e188.proxy.daytona.works\

curl -o /dev/null -s -w "DNS: %{time_namelookup}\nTCP: %{time_connect}\nTLS: %{time_appconnect}\nTTFB: %{time_starttransfer}\nTotal: %{time_total}\n" \\
  https://8000-95a3499f-7368-4a1a-916c-05df9249e188.proxy.daytona.works/list-files\

curl -o /dev/null -s -w "DNS: %{time_namelookup}\nTCP: %{time_connect}\nTLS: %{time_appconnect}\nTTFB: %{time_starttransfer}\nTotal: %{time_total}\n" \\
  https://8000-95a3499f-7368-4a1a-916c-05df9249e188.proxy.daytona.works
git checkout develop && git pull
git checkout -b justin/more-tool-ui
git checkout develop && git pull
bun
clear
claude
bun
bun create
clear
clear
cd ..
bun create hono@latest workflow-speed-test -- --template=nodejs
bun create hono@latest workflow-speed-test --template=nodejs
cd workflow-speed-test
bun add workflow nitro
cursor .
bun dev
bun dev
bun dev
bun dev
bun dev
bun dev
bun dev
bun dev
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
curl -X POST http://localhost:3000/api/signup \\
  -H "Content-Type: application/json" \\
  -d '{"email":"user@example.com"}'
npx workflow web
p dev
p dev
clear
p dev
clear
p dev
p dev
p dev
cclear
clear
p dev
p dev
clear
p dev
clear
